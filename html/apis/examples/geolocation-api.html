<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8"/>
    <title>Geolocation API Example Page</title>
    <script>
      window.onload = function () {
        var geoLocator = window.navigator.geolocation;
        var posOptions = {enableHighAccuracy: true,timeout: 45000};
        geoLocator.getCurrentPosition(successPosition, errorPosition,
        posOptions);

        watcher = geoLocator.watchPosition(successPositionWatcher, errorPositionWatcher, posOptions);
      }

      function successPositionWatcher(pos) {
        var sp = document.createElement("p");
        sp.innerText = "Latitude: " + pos.coords.latitude +
        " Longitude: " + pos.coords.longitude;
        document.getElementById("geoResultsWatcher").appendChild(sp);
        geoLocator.clearWatch(watcher);
      }
      
      function successPosition(pos) {
        var sp = document.createElement("p");
        sp.innerText = "Latitude: " + pos.coords.latitude +
        " Longitude: " + pos.coords.longitude;
        document.getElementById("geoResults").appendChild(sp);
      }

      function errorPositionWatcher(err) {
        var sp = document.createElement("p");
        sp.innerText = "error: " + err.message; + " code: " + err.code;
        document.getElementById("geoResultsWatcher").appendChild(sp);
      }

      function errorPosition(err) {
        var sp = document.createElement("p");
        sp.innerText = "error: " + err.message; + " code: " + err.code;
        document.getElementById("geoResults").appendChild(sp);
      }

    </script>
  </head>
  <body>
    <div id="geoResults">
      <p>Current Location is:</p>
    </div>
    <div id="geoResultsWatcher">
      <p>Current Location with watcher is:</p>
    </div>
  </body>
</html>